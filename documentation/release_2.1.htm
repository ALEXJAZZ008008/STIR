<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Summary of changes in STIR release 2.1 alpha (dated October 2009)</title>
  </head>

  <body>
    <h1>Summary of changes in STIR release 2.1 alpha (dated October 2009)</h1>

<p>Most of the work in this update was by Kris Thielemans (Hammersmith Imanet Ltd)
and Charalampos Tsoumpas (Imperial College and Hammersmith Imanet Ltd).
Some older code by Sanida Mustafovic (Imperial College and Hammersmith Imanet Ltd) 
has now finally been incorporated into STIR as well.
Other contributions are mentioned explicitly below.<br />
See also the new <tt>contrib</tt> sub-directory available in the documentation zip file.
</p>
<ul>
<li>Single scatter estimation routines<br />
Contributors: Charalampos Tsoumpas, Pablo Aguiar (Univ of Barcelona, when working on this topic), 
Nikolaos Dikaios (National Technical University of Athens, when working on this topic) 
and Kris Thielemans.
</li>
<li>Parametric image estimation routines.<br />
Contributors: Charalampos Tsoumpas and Kris Thielemans
</li>

<li>B-spline interpolation functions and a few numerical algorithms.<br />
Contributors: Charalampos Tsoumpas, 
Nikolaos Dikaios (National Technical University of Athens, when working on this topic) 
and Kris Thielemans.
</li>
</ul>

<h2> Summary for end users (also to be read by developers)</h2>

<h3>Known problems</h3>
<ul>
<li>ECAT6 routines seem to have problems since STIR 2.0. ECAT6 is therefore no longer supported</li>
<li>The interpolating back-projector can still give problems in the centre of the images
on some architectures/compiler/optimisation settings.</li>
</ul>

<h3>New utilities</h3>
<ul>
<li><tt>abs_image</tt>, <tt>convert_to_binary_image.cxx</tt>, <tt>find_fwhm_in_image</tt></li>
<li>Utilities in <tt>modelling_utilities</tt>.
<li>Parametric image reconstruction algorithms <tt>POSMAPOSL</tt> and <tt>POSSPS</tt>. 
Currently we have only an objective function for Patlak, but extension
to other linear models is easy.</li>
</ul>


<h3>New functionality of existing utilities</h3>
<ul>
<li>Added data for the <strong>GE Discovery 600</strong>.</li>
<li>Added data for the <strong>Biograph 16</strong> (by Robert Barnett, Westmead Hospital, Sydney).</li>
<li><tt>stir_math</tt> has 2 new options <tt>--parametric</tt> or <tt>--dynamic</tt>.</li>
</ul>

<h3>Documentation changes</h3>
<ul>
<li>updated doxygen</li>
 </ul>

<h3>recon_test_pack changes</h3>
<ul>
<li>Moved the tests for the ecat routines to a separate file <tt>run_ecat_tests.sh</tt></li>
<li>Updated Windows batch files. They were broken in STIR 2.0</li>
</ul>

<H2>What's new for developers (aside from what should be obvious
from the above):</H2>

<h3>New functionality</h3>
<ul>
<li><code>ArrayFilter2DUsingConvolution</code> and <code>ArrayFilter3DUsingConvolution</code>.</li>
<li>Preliminary classes for dynamic and gated data</li>
<li>New member <code>fill_nonidentifiable_target_parameters</code> of the 
<code>GeneralisedObjectiveFunction</code> hierarchy. This used by OSSPS to avoid problems
when initialising with images that have for instance been reconstructed on a square grid.</li>
<li>B-spline interpolation functions and a few numerical algorithms (IIR and FIR filters, 
1d numerical integration).<br />
</ul>

<h3>Other code changes</h3>
<ul>
<li><code>error()</code> now throws an exception as opposed to calling exit, such that we can catch 
the exception in a calling routine. This would be essential for building GUIs etc. Unfortunately,
for the user this has the potential to generate some confusion as the error message
when a STIR program calss <code>error()</code> now talks about unhandled exception.
The best way to solve this would be to catch all exceptions in each <code>main()</code>, but
that is a lot of work...</li>
<li><code>ProjDataInfoCylindrical::set_num_views()</code> now  makes sure that we cover the
      same range of angles as before (usually, but not necessarily, 180 degrees).
</li>
<li>Most of the .cxx files in the <tt>recon_buildblock</tt> had to be updated to
add instantiations for parametric images. This is unfortunate and another
mechanism would be nicer.
</li>
<li>moved code that finds subset-num in terms of subiteration-num to 
<code>IterativeReconstruction::get_subset_num()</code>. If you have your own 
reconstruction classes, you should use this member. 
<code>IterativeReconstruction::randomly_permute_subset_order()</code> is now private.</li>
<li><code>read_stream_in_memory</code> (in <tt>utilities.h</tt>) now takes a <code>file_size</code> 
argument of type <code>std::streamsize</code> as opposed to <code>unsigned long</code>. As
this parameter is passed as a reference, this change is <strong>not backwards compatible</strong>
(at least on systems where these 2 types are not equal).</li>
<li>Various small fixes for more recent compilers such as gcc 4.3 and Visual Studio Express 2010.</li>
</ul>

</body>

</html>

